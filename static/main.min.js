function switchTheme(){var t=location.protocol+"//"+location.host+"/theme";axios.get(t).then(function(t){location.reload()}).catch(function(t){return t})}function getDraftStatus(){var t=location.protocol+"//"+location.host+"/draftstatus/"+room;axios.get(t).then(function(t){t.data.ready?window.location=admin_url:(toastr.options={positionClass:"toast-top-center"},toastr.error("Not all the teams are joined yet!"))}).catch(function(t){return t})}function newMessage(t){updater.socket.send(t)}function removeTurnIndicator(){$(".draft-item").removeClass("turn-indicator")}function turnIndicator(t){$(".draft-item[data-order='"+t+"']").addClass("turn-indicator")}function lockHero(t){$(t).removeClass("hero-select hero-highlight").addClass("hero-locked").off("click")}function removeHeroHighlight(){$(".hero-select").removeClass("hero-highlight")}function getDraftItem(t){return $(".draft-item > img[data-order='"+t+"']")}function getHeroFaction(t){return t.attr("data-faction")}function getSide(t){return t.attr("data-side")}function updateDraft(t,e){var o=getDraftItem(e),a=getDraftItem(e+1),n=$(".hero-select[data-hero='"+t+"']"),r="ban"==o.attr("data-type"),i="ban"==a.attr("data-type"),s=getSide(o),c=getSide(a),d=n.attr("src");setSide(r,s,n),$(o).attr("src",d),lockHero(n),filterByCurrentType(c,a,i)}function setSide(t,e,o){t||(1==e&&null==faction1&&(faction1=getHeroFaction(o)),2==e&&null==faction2&&(faction2=getHeroFaction(o)))}function filterByCurrentType(t,e,o){showall(),hideFilter(e),hideFaction(t,o)}function hideFaction(t,e){var o=null;if(o=e?2==t?faction1:faction2:2==t?faction2:faction1,null!=o){var a="[data-faction != '"+o+"']",n=$("[data-faction]").filter(a);n.hide()}}function showall(){$("[data-hero]").show()}function hideFilter(t){var e=t.attr("data-typefilter");"any"!=e&&($("[data-hero]").hide(),$(e).show())}function updateTurnIndicator(t){removeTurnIndicator(),turnIndicator(t+1)}function updateHistory(t){for(let e of t)updateDraft(e.message,e.index)}var faction1,faction2;$(document).ready(function(){$("#switchTheme").on("click",function(){switchTheme()}),$("#startDraft").on("click",function(){getDraftStatus()}),$("#overrideHeroes").change(function(){$("#overrideHeroesField").toggle()}),$("#customBackground").change(function(){$("#customBackgroundField").toggle()}),$(".hero-select").on("click",function(){return $(this).hasClass("hero-highlight")?newMessage($(this).data("hero")):$(this).addClass("hero-highlight"),!1}),"undefined"!=typeof hash&&updater.start(),new ClipboardJS(".clipboard")});var updater={socket:null,start:function(){var t="ws://";"https:"==location.protocol&&(t="wss://");var e=t+location.host+"/chatsocket/"+hash;updater.socket=new WebSocket(e),updater.socket.onmessage=function(t){updater.showMessage(JSON.parse(t.data))}},showMessage:function(t){"update"==t.type?(updateDraft(t.message,t.index),updateTurnIndicator(t.index)):"time"==t.type?$("#timer").text(t.message):"bonustime"==t.type?$("#bonustimer-"+t.team).text(t.message):"message"==t.type?(toastr.options={positionClass:"toast-top-center"},toastr.error(t.message),removeHeroHighlight()):"start"==t.type?(toastr.options={positionClass:"toast-top-center"},toastr.success(t.message),turnIndicator(1),filterByCurrentType(1,getDraftItem(1))):"history"==t.type&&updateHistory(t.message)}};